import{a as J,b as K}from"./chunk-47RQBI2B.js";import{a as $,b as v,c as V,d as A,e as R,f as p,g as j,h as q,i as B,j as G,k as L,l as U,m as z,n as W,o as H}from"./chunk-T5LS4Z7D.js";import{$ as y,B as d,Ca as r,Da as T,E as x,Ea as P,F as l,J as h,K as g,Q as C,Ta as F,Wa as E,X as c,a as S,b as _,ca as w,la as N,pa as I,qa as M,ra as o,sa as n,ta as D,ua as O,va as m,wa as b}from"./chunk-Z7AZIL2F.js";var u=class i{constructor(t){this.http=t}URL="https://personal-expensetracker-backend-673k.onrender.com/api/tasks";getTasks(){return this.http.get(this.URL,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})}createTask(t){return this.http.post(this.URL,t,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})}updateTask(t,e){return this.http.put(`${this.URL}/${t}`,e,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})}deleteTask(t){return this.http.delete(`${this.URL}/${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})}static \u0275fac=function(e){return new(e||i)(x(F))};static \u0275prov=d({token:i,factory:i.\u0275fac,providedIn:"root"})};var f=class i{constructor(){}notify(t){Notification.permission==="granted"?new Notification("Task Manager",{body:t}):Notification.permission!=="denied"&&Notification.requestPermission().then(e=>{e==="granted"&&new Notification("Task Manager",{body:t})})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=d({token:i,factory:i.\u0275fac,providedIn:"root"})};var Z=(i,t)=>t._id;function tt(i,t){if(i&1){let e=O();o(0,"div",9)(1,"h3"),r(2),o(3,"small"),r(4),n()(),o(5,"p"),r(6),n(),o(7,"button",10),m("click",function(){let s=h(e).$implicit,k=b();return g(k.editTask(s))}),r(8,"Edit"),n(),o(9,"button",10),m("click",function(){let s=h(e).$implicit,k=b();return g(k.deleteTask(s._id))}),r(10,"Delete"),n()()}if(i&2){let e=t.$implicit;c(2),T(e.title),c(2),P("(",e.category,")"),c(2),T(e.description)}}var X=class i{constructor(t){this.notificationService=t}newTask=new R({title:new p("",[v.required]),description:new p("",[v.required]),completed:new p(!1),category:new p("Work")});tasks=C([]);taskService=l(u);authService=l(H);router=l(E);snacbar=l(J);ngOnInit(){this.loadTasks()}loadTasks(){this.taskService.getTasks().subscribe({next:t=>{this.tasks.set(t)},error:t=>{console.error(t),this.router.navigate(["/login"])}})}createTask(){if(this.notificationService.notify("New task created!"),this.newTask.invalid){this.snacbar.open("Please fill all required fields","Dismiss",{duration:3e3});return}this.taskService.createTask(this.newTask.value).subscribe({next:()=>{this.snacbar.open("Task was successfully created","Dismiss",{duration:3e3}),this.newTask.reset(),this.loadTasks()},error:t=>alert("Failed to add task")})}deleteTask(t){this.taskService.deleteTask(t).subscribe({next:()=>this.loadTasks(),error:e=>console.log(e.message)})}editTask(t){let e=prompt("Edit Task Title:",t.title);if(e!==null){let a=_(S({},t),{title:e});this.taskService.updateTask(t._id,a).subscribe({next:()=>this.loadTasks(),error:s=>console.log(s.message)})}}logout(){this.authService.logout()}static \u0275fac=function(e){return new(e||i)(y(f))};static \u0275cmp=w({type:i,selectors:[["app-dashboard"]],decls:19,vars:1,consts:[[1,"dashboard-container"],[3,"ngSubmit","formGroup"],["formControlName","title","type","text","placeholder","Task Title","required",""],["formControlName","description","type","text","placeholder","Description"],["formControlName","category"],["value","Work"],["value","Personal"],["value","Shopping"],["type","submit"],[1,"task-item"],[3,"click"]],template:function(e,a){e&1&&(o(0,"div",0)(1,"h2"),r(2,"Welcome to your Tasks"),n(),o(3,"form",1),m("ngSubmit",function(){return a.createTask()}),D(4,"input",2)(5,"input",3),o(6,"select",4)(7,"option",5),r(8,"Work"),n(),o(9,"option",6),r(10,"Personal"),n(),o(11,"option",7),r(12,"Shopping"),n()(),o(13,"button",8),r(14,"Add Task"),n()(),I(15,tt,11,3,"div",9,Z),o(17,"button",10),m("click",function(){return a.logout()}),r(18,"Logout"),n()()),e&2&&(c(3),N("formGroup",a.newTask),c(12),M(a.tasks()))},dependencies:[W,j,L,U,$,G,V,A,z,q,B,K],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:20px}.task-item[_ngcontent-%COMP%]{background:#fff;margin:10px 0;padding:15px;border-radius:8px;box-shadow:0 1px 6px #0000001a;position:relative}.task-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.task-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.task-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:auto;margin-right:10px}form[_ngcontent-%COMP%]{margin-bottom:20px}"]})};export{X as DashboardComponent};
